---
description: 사용자 요구사항을 기반으로 현재 기능에 대한 맞춤형 체크리스트를 생성합니다.
scripts:
  sh: scripts/bash/check-prerequisites.sh --json
  ps: scripts/powershell/check-prerequisites.ps1 -Json
---

## 체크리스트 목적: "한국어로 작성된 요구사항의 단위 테스트"

**중요한 개념**: 체크리스트는 **요구사항 작성을 위한 단위 테스트**입니다 - 특정 도메인에서 요구사항의 품질, 명확성 및 완전성을 검증합니다.

**검증/테스트용이 아님**:

- ❌ "버튼 클릭이 올바르게 작동하는지 확인" 아님
- ❌ "오류 처리가 작동하는지 테스트" 아님
- ❌ "API가 200을 반환하는지 확인" 아님
- ❌ 코드/구현이 명세와 일치하는지 확인하는 것이 아님

**요구사항 품질 검증용**:

- ✅ "모든 카드 유형에 대한 시각적 계층 구조 요구사항이 정의되었는가?" (완전성)
- ✅ "'두드러진 표시'가 특정 크기/위치로 정량화되었는가?" (명확성)
- ✅ "모든 인터랙티브 요소에서 호버 상태 요구사항이 일관되게 정의되었는가?" (일관성)
- ✅ "키보드 내비게이션에 대한 접근성 요구사항이 정의되었는가?" (커버리지)
- ✅ "로고 이미지 로드 실패 시 어떻게 되는지 명세에 정의되었는가?" (엣지 케이스)

**비유**: 명세가 한국어로 작성된 코드라면, 체크리스트는 단위 테스트 스위트입니다. 요구사항이 잘 작성되었는지, 완전한지, 명확한지, 구현 준비가 되었는지 테스트하는 것이지 - 구현이 작동하는지 테스트하는 것이 아닙니다.

## 사용자 입력

```text
$ARGUMENTS
```

진행하기 전에 사용자 입력을 **반드시** 고려해야 합니다(비어있지 않은 경우).

## 실행 단계

1. **설정**: 저장소 루트에서 `{SCRIPT}`를 실행하고 FEATURE_DIR 및 AVAILABLE_DOCS 목록에 대한 JSON을 파싱합니다.
   - 모든 파일 경로는 절대 경로여야 합니다.
   - "I'm Groot"와 같이 인수에 작은따옴표가 있는 경우 이스케이프 구문 사용: 예: 'I'\''m Groot' (또는 가능한 경우 큰따옴표: "I'm Groot").

2. **의도 명확화 (동적)**: 최대 3개의 초기 문맥적 명확화 질문을 도출합니다 (사전 준비된 카탈로그 없음). 다음을 충족해야 합니다:
   - 사용자의 표현 + spec/plan/tasks에서 추출된 신호로부터 생성
   - 체크리스트 내용을 실질적으로 변경하는 정보에 대해서만 질문
   - `$ARGUMENTS`에서 이미 명확한 경우 개별적으로 건너뜀
   - 폭보다 정확성 선호

   생성 알고리즘:
   1. 신호 추출: 기능 도메인 키워드 (예: auth, latency, UX, API), 위험 지표 ("critical", "must", "compliance"), 이해관계자 힌트 ("QA", "review", "security team"), 명시적 결과물 ("a11y", "rollback", "contracts").
   2. 신호를 관련성 순으로 순위가 매겨진 후보 초점 영역(최대 4개)으로 클러스터링합니다.
   3. 명시적이지 않은 경우 예상 청중 및 타이밍(작성자, 검토자, QA, 릴리스)을 식별합니다.
   4. 누락된 차원 감지: 범위 폭, 깊이/엄격성, 위험 강조, 제외 경계, 측정 가능한 수락 기준.
   5. 다음 원형에서 선택한 질문을 공식화합니다:
      - 범위 개선 (예: "X 및 Y와의 통합 접점을 포함해야 합니까 아니면 로컬 모듈 정확성에 국한되어야 합니까?")
      - 위험 우선순위 지정 (예: "이러한 잠재적 위험 영역 중 어느 것이 필수 게이팅 검사를 받아야 합니까?")
      - 깊이 보정 (예: "가벼운 사전 커밋 점검 목록입니까 아니면 공식 릴리스 게이트입니까?")
      - 청중 프레이밍 (예: "작성자만 사용합니까 아니면 PR 검토 중 동료가 사용합니까?")
      - 경계 제외 (예: "이번 라운드에서 성능 튜닝 항목을 명시적으로 제외해야 합니까?")
      - 시나리오 클래스 갭 (예: "복구 흐름이 감지되지 않음—롤백 / 부분 실패 경로가 범위에 포함됩니까?")

   질문 형식 규칙:
   - 옵션을 제시하는 경우 다음 열로 간결한 테이블을 생성합니다: 옵션 | 후보 | 중요한 이유
   - 최대 A-E 옵션으로 제한; 자유 형식 답변이 더 명확한 경우 테이블 생략
   - 사용자에게 이미 말한 것을 다시 말하도록 요청하지 않음
   - 추측성 카테고리 피하기 (환각 없음). 불확실한 경우 명시적으로 질문: "X가 범위에 속하는지 확인하십시오."

   상호작용이 불가능할 때의 기본값:
   - 깊이: 표준
   - 청중: 코드 관련인 경우 검토자(PR); 그렇지 않으면 작성자
   - 초점: 상위 2개 관련성 클러스터

   질문을 출력합니다(Q1/Q2/Q3 레이블). 답변 후: ≥2개의 시나리오 클래스(대안 / 예외 / 복구 / 비기능 도메인)가 불명확한 경우, 각각 한 줄 정당화와 함께 최대 2개의 추가 대상 후속 질문(Q4/Q5)을 할 수 있습니다(예: "미해결 복구 경로 위험"). 총 5개 질문을 초과하지 마십시오. 사용자가 명시적으로 더 거부하면 에스컬레이션을 건너뜁니다.

3. **사용자 요청 이해**: `$ARGUMENTS` + 명확화 답변 결합:
   - 체크리스트 주제 도출 (예: security, review, deploy, ux)
   - 사용자가 언급한 명시적 필수 항목 통합
   - 초점 선택을 카테고리 스캐폴딩에 매핑
   - spec/plan/tasks에서 누락된 컨텍스트 추론 (환각하지 않음)

4. **기능 컨텍스트 로드**: FEATURE_DIR에서 읽기:
   - spec.md: 기능 요구사항 및 범위
   - plan.md (있는 경우): 기술 세부사항, 의존성
   - tasks.md (있는 경우): 구현 작업

   **컨텍스트 로딩 전략**:
   - 활성 초점 영역과 관련된 필요한 부분만 로드 (전체 파일 덤프 방지)
   - 긴 섹션을 간결한 시나리오/요구사항 글머리 기호로 요약 선호
   - 점진적 공개 사용: 갭이 감지된 경우에만 후속 검색 추가
   - 소스 문서가 큰 경우 원시 텍스트를 임베드하는 대신 중간 요약 항목 생성

5. **체크리스트 생성** - "요구사항을 위한 단위 테스트" 생성:
   - `FEATURE_DIR/checklists/` 디렉터리가 없으면 생성
   - 고유한 체크리스트 파일명 생성:
     - 도메인 기반의 짧고 설명적인 이름 사용 (예: `ux.md`, `api.md`, `security.md`)
     - 형식: `[domain].md`
     - 파일이 있으면 기존 파일에 추가
   - CHK001부터 시작하여 순차적으로 항목 번호 매기기
   - 각 `/speckit.checklist` 실행은 새 파일을 생성합니다 (기존 체크리스트를 덮어쓰지 않음)

   **핵심 원칙 - 구현이 아닌 요구사항 테스트**:
   모든 체크리스트 항목은 요구사항 자체를 다음에 대해 평가해야 합니다:
   - **완전성**: 모든 필수 요구사항이 있습니까?
   - **명확성**: 요구사항이 명확하고 구체적입니까?
   - **일관성**: 요구사항이 서로 일치합니까?
   - **측정 가능성**: 요구사항을 객관적으로 확인할 수 있습니까?
   - **커버리지**: 모든 시나리오/엣지 케이스가 다루어졌습니까?

   **카테고리 구조** - 요구사항 품질 차원별로 항목 그룹화:
   - **요구사항 완전성** (모든 필수 요구사항이 문서화되었습니까?)
   - **요구사항 명확성** (요구사항이 구체적이고 명확합니까?)
   - **요구사항 일관성** (요구사항이 충돌 없이 일치합니까?)
   - **수락 기준 품질** (성공 기준이 측정 가능합니까?)
   - **시나리오 커버리지** (모든 흐름/케이스가 다루어졌습니까?)
   - **엣지 케이스 커버리지** (경계 조건이 정의되었습니까?)
   - **비기능 요구사항** (성능, 보안, 접근성 등 - 명시되었습니까?)
   - **의존성 및 가정** (문서화되고 검증되었습니까?)
   - **모호성 및 충돌** (명확히해야 할 사항은 무엇입니까?)

   **체크리스트 항목 작성 방법 - "한국어를 위한 단위 테스트"**:

   ❌ **잘못됨** (구현 테스트):
   - "랜딩 페이지에 3개의 에피소드 카드가 표시되는지 확인"
   - "데스크톱에서 호버 상태가 작동하는지 테스트"
   - "로고 클릭이 홈으로 이동하는지 확인"

   ✅ **올바름** (요구사항 품질 테스트):
   - "특집 에피소드의 정확한 수와 레이아웃이 명시되었습니까?" [완전성]
   - "'두드러진 표시'가 특정 크기/위치로 정량화되었습니까?" [명확성]
   - "모든 인터랙티브 요소에서 호버 상태 요구사항이 일관되게 정의되었습니까?" [일관성]
   - "모든 인터랙티브 UI에 대한 키보드 내비게이션 요구사항이 정의되었습니까?" [커버리지]
   - "로고 이미지 로드 실패 시 폴백 동작이 명시되었습니까?" [엣지 케이스]
   - "비동기 에피소드 데이터에 대한 로딩 상태가 정의되었습니까?" [완전성]
   - "경쟁하는 UI 요소에 대한 시각적 계층 구조를 명세에서 정의합니까?" [명확성]

   **항목 구조**:
   각 항목은 다음 패턴을 따라야 합니다:
   - 요구사항 품질에 대해 묻는 질문 형식
   - spec/plan에 작성된 (또는 작성되지 않은) 내용에 초점
   - 대괄호 안에 품질 차원 포함 [완전성/명확성/일관성/등]
   - 기존 요구사항을 확인할 때 명세 섹션 참조 `[Spec §X.Y]`
   - 누락된 요구사항을 확인할 때 `[Gap]` 마커 사용

   **품질 차원별 예시**:

   완전성:
   - "모든 API 실패 모드에 대한 오류 처리 요구사항이 정의되었습니까? [Gap]"
   - "모든 인터랙티브 요소에 대한 접근성 요구사항이 명시되었습니까? [완전성]"
   - "반응형 레이아웃에 대한 모바일 중단점 요구사항이 정의되었습니까? [Gap]"

   명확성:
   - "'빠른 로딩'이 특정 시간 임계값으로 정량화되었습니까? [명확성, Spec §NFR-2]"
   - "'관련 에피소드' 선택 기준이 명시적으로 정의되었습니까? [명확성, Spec §FR-5]"
   - "'두드러진'이 측정 가능한 시각적 속성으로 정의되었습니까? [모호성, Spec §FR-4]"

   일관성:
   - "모든 페이지에서 내비게이션 요구사항이 일치합니까? [일관성, Spec §FR-10]"
   - "랜딩 페이지와 상세 페이지 사이에 카드 컴포넌트 요구사항이 일관됩니까? [일관성]"

   커버리지:
   - "제로 상태 시나리오(에피소드 없음)에 대한 요구사항이 정의되었습니까? [커버리지, 엣지 케이스]"
   - "동시 사용자 상호작용 시나리오가 다루어졌습니까? [커버리지, Gap]"
   - "부분 데이터 로딩 실패에 대한 요구사항이 명시되었습니까? [커버리지, 예외 흐름]"

   측정 가능성:
   - "시각적 계층 구조 요구사항이 측정 가능/테스트 가능합니까? [수락 기준, Spec §FR-1]"
   - "'균형 잡힌 시각적 무게'를 객관적으로 확인할 수 있습니까? [측정 가능성, Spec §FR-2]"

   **시나리오 분류 및 커버리지** (요구사항 품질 초점):
   - 다음에 대한 요구사항이 존재하는지 확인: 기본, 대안, 예외/오류, 복구, 비기능 시나리오
   - 각 시나리오 클래스에 대해 질문: "[시나리오 유형] 요구사항이 완전하고 명확하며 일관됩니까?"
   - 시나리오 클래스가 누락된 경우: "[시나리오 유형] 요구사항이 의도적으로 제외되었거나 누락되었습니까? [Gap]"
   - 상태 변경이 발생할 때 복원력/롤백 포함: "마이그레이션 실패에 대한 롤백 요구사항이 정의되었습니까? [Gap]"

   **추적 가능성 요구사항**:
   - 최소: 항목의 ≥80%는 최소 하나의 추적 가능성 참조를 포함해야 합니다
   - 각 항목은 다음을 참조해야 합니다: 명세 섹션 `[Spec §X.Y]`, 또는 마커 사용: `[Gap]`, `[Ambiguity]`, `[Conflict]`, `[Assumption]`
   - ID 시스템이 없는 경우: "요구사항 및 수락 기준 ID 체계가 확립되었습니까? [Traceability]"

   **문제 표면화 및 해결** (요구사항 품질 문제):
   요구사항 자체에 대한 질문:
   - 모호성: "'빠른'이라는 용어가 특정 메트릭으로 정량화되었습니까? [Ambiguity, Spec §NFR-1]"
   - 충돌: "§FR-10과 §FR-10a 사이에 내비게이션 요구사항이 충돌합니까? [Conflict]"
   - 가정: "'항상 사용 가능한 팟캐스트 API'라는 가정이 검증되었습니까? [Assumption]"
   - 의존성: "외부 팟캐스트 API 요구사항이 문서화되었습니까? [Dependency, Gap]"
   - 누락된 정의: "'시각적 계층 구조'가 측정 가능한 기준으로 정의되었습니까? [Gap]"

   **콘텐츠 통합**:
   - 소프트 캡: 원시 후보 항목이 40개를 초과하면 위험/영향으로 우선순위 지정
   - 동일한 요구사항 측면을 확인하는 거의 중복 항목 병합
   - 5개 이상의 저영향 엣지 케이스가 있는 경우 하나의 항목 생성: "엣지 케이스 X, Y, Z가 요구사항에서 다루어졌습니까? [Coverage]"

   **🚫 절대 금지** - 이것들은 요구사항 테스트가 아닌 구현 테스트가 됩니다:
   - ❌ "확인", "테스트", "검증", "체크" + 구현 동작으로 시작하는 모든 항목
   - ❌ 코드 실행, 사용자 작업, 시스템 동작에 대한 참조
   - ❌ "올바르게 표시", "제대로 작동", "예상대로 기능"
   - ❌ "클릭", "이동", "렌더링", "로드", "실행"
   - ❌ 테스트 케이스, 테스트 계획, QA 절차
   - ❌ 구현 세부사항 (프레임워크, API, 알고리즘)

   **✅ 필수 패턴** - 이것들은 요구사항 품질을 테스트합니다:
   - ✅ "[시나리오]에 대해 [요구사항 유형]이 정의/명시/문서화되었습니까?"
   - ✅ "[모호한 용어]가 특정 기준으로 정량화/명확화되었습니까?"
   - ✅ "[섹션 A]와 [섹션 B] 사이에 요구사항이 일관되게 정의되었습니까?"
   - ✅ "[요구사항]을 객관적으로 측정/확인할 수 있습니까?"
   - ✅ "[엣지 케이스/시나리오]가 요구사항에서 다루어졌습니까?"
   - ✅ "명세에서 [누락된 측면]을 정의합니까?"

6. **구조 참조**: 제목, 메타 섹션, 카테고리 제목 및 ID 형식에 대해 `templates/checklist-template.md`의 표준 템플릿을 따라 체크리스트를 생성합니다. 템플릿을 사용할 수 없는 경우: H1 제목, 목적/생성 메타 줄, CHK001부터 시작하여 전역으로 증가하는 ID로 `- [ ] CHK### <요구사항 항목>` 줄을 포함하는 `##` 카테고리 섹션을 사용합니다.

7. **보고**: 생성된 체크리스트의 전체 경로, 항목 수를 출력하고 각 실행이 새 파일을 생성한다는 것을 사용자에게 상기시킵니다. 요약:
   - 선택된 초점 영역
   - 깊이 수준
   - 액터/타이밍
   - 포함된 명시적으로 사용자가 지정한 필수 항목

**중요**: 각 `/speckit.checklist` 명령 호출은 파일이 이미 존재하지 않는 한 짧고 설명적인 이름을 사용하여 체크리스트 파일을 생성합니다. 이를 통해:

- 다양한 유형의 여러 체크리스트 (예: `ux.md`, `test.md`, `security.md`)
- 체크리스트 목적을 나타내는 간단하고 기억하기 쉬운 파일 이름
- `checklists/` 폴더에서 쉬운 식별 및 탐색

혼잡을 피하려면 설명적인 유형을 사용하고 완료되면 오래된 체크리스트를 정리하십시오.

## 예시 체크리스트 유형 및 샘플 항목

**UX 요구사항 품질:** `ux.md`

샘플 항목 (구현이 아닌 요구사항 테스트):

- "시각적 계층 구조 요구사항이 측정 가능한 기준으로 정의되었습니까? [명확성, Spec §FR-1]"
- "UI 요소의 수와 위치가 명시적으로 지정되었습니까? [완전성, Spec §FR-1]"
- "상호작용 상태 요구사항 (hover, focus, active)이 일관되게 정의되었습니까? [일관성]"
- "모든 인터랙티브 요소에 대한 접근성 요구사항이 명시되었습니까? [커버리지, Gap]"
- "이미지 로드 실패 시 폴백 동작이 정의되었습니까? [엣지 케이스, Gap]"
- "'두드러진 표시'를 객관적으로 측정할 수 있습니까? [측정 가능성, Spec §FR-4]"

**API 요구사항 품질:** `api.md`

샘플 항목:

- "모든 실패 시나리오에 대한 오류 응답 형식이 명시되었습니까? [완전성]"
- "속도 제한 요구사항이 특정 임계값으로 정량화되었습니까? [명확성]"
- "모든 엔드포인트에서 인증 요구사항이 일관되게 정의되었습니까? [일관성]"
- "외부 의존성에 대한 재시도/타임아웃 요구사항이 정의되었습니까? [커버리지, Gap]"
- "버전 관리 전략이 요구사항에 문서화되었습니까? [Gap]"

**성능 요구사항 품질:** `performance.md`

샘플 항목:

- "성능 요구사항이 특정 메트릭으로 정량화되었습니까? [명확성]"
- "모든 중요한 사용자 여정에 대한 성능 목표가 정의되었습니까? [커버리지]"
- "다양한 부하 조건에서의 성능 요구사항이 명시되었습니까? [완전성]"
- "성능 요구사항을 객관적으로 측정할 수 있습니까? [측정 가능성]"
- "고부하 시나리오에 대한 성능 저하 요구사항이 정의되었습니까? [엣지 케이스, Gap]"

**보안 요구사항 품질:** `security.md`

샘플 항목:

- "모든 보호된 리소스에 대한 인증 요구사항이 명시되었습니까? [커버리지]"
- "민감한 정보에 대한 데이터 보호 요구사항이 정의되었습니까? [완전성]"
- "위협 모델이 문서화되고 요구사항이 이에 맞춰졌습니까? [추적 가능성]"
- "보안 요구사항이 규정 준수 의무와 일치합니까? [일관성]"
- "보안 실패/침해 대응 요구사항이 정의되었습니까? [Gap, 예외 흐름]"

## 안티 예시: 하지 말아야 할 것

**❌ 잘못됨 - 이것들은 요구사항이 아닌 구현을 테스트합니다:**

```markdown
- [ ] CHK001 - 랜딩 페이지에 3개의 에피소드 카드가 표시되는지 확인 [Spec §FR-001]
- [ ] CHK002 - 데스크톱에서 호버 상태가 올바르게 작동하는지 테스트 [Spec §FR-003]
- [ ] CHK003 - 로고 클릭이 홈 페이지로 이동하는지 확인 [Spec §FR-010]
- [ ] CHK004 - 관련 에피소드 섹션에 3-5개 항목이 표시되는지 확인 [Spec §FR-005]
```

**✅ 올바름 - 이것들은 요구사항 품질을 테스트합니다:**

```markdown
- [ ] CHK001 - 특집 에피소드의 수와 레이아웃이 명시적으로 지정되었습니까? [완전성, Spec §FR-001]
- [ ] CHK002 - 모든 인터랙티브 요소에 대한 호버 상태 요구사항이 일관되게 정의되었습니까? [일관성, Spec §FR-003]
- [ ] CHK003 - 클릭 가능한 모든 브랜드 요소에 대한 내비게이션 요구사항이 명확합니까? [명확성, Spec §FR-010]
- [ ] CHK004 - 관련 에피소드의 선택 기준이 문서화되었습니까? [Gap, Spec §FR-005]
- [ ] CHK005 - 비동기 에피소드 데이터에 대한 로딩 상태 요구사항이 정의되었습니까? [Gap]
- [ ] CHK006 - "시각적 계층 구조" 요구사항을 객관적으로 측정할 수 있습니까? [측정 가능성, Spec §FR-001]
```

**주요 차이점:**

- 잘못됨: 시스템이 올바르게 작동하는지 테스트
- 올바름: 요구사항이 올바르게 작성되었는지 테스트
- 잘못됨: 동작 검증
- 올바름: 요구사항 품질 유효성 검사
- 잘못됨: "X를 수행합니까?"
- 올바름: "X가 명확하게 지정되었습니까?"
